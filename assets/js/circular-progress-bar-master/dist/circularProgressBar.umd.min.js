!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).CircularProgressBar=e()}(this,(function(){"use strict";const t={colorSlice:"#00a1ff",fontColor:"#000",fontSize:"1.6rem",fontWeight:400,lineargradient:!1,number:!0,round:!1,fill:"none",unit:"%",rotation:-90,size:200,stroke:10},e=({rotation:t,animationSmooth:e})=>`transform:rotate(${t}deg);transform-origin: 50% 50%;${e?"transition: stroke-dashoffset "+e:""}`,n=t=>({"stroke-dasharray":t||"264"}),o=({round:t})=>({"stroke-linecap":t?"round":""}),i=t=>({"font-size":t.fontSize,"font-weight":t.fontWeight}),s=t=>document.querySelector(t),r=(t,{lineargradient:e,index:n,colorSlice:o})=>{t.setAttribute("stroke",e?`url(#linear-${n})`:o)},a=(t,e)=>{for(const n in e)null==t||t.setAttribute(n,e[n])},c=t=>document.createElementNS("http://www.w3.org/2000/svg",t),l=(t,e)=>{const n=c("tspan");return n.classList.add(t),e&&(n.textContent=e),n},d=(t,e,n)=>{const o=264-t/100*(n?2.64*(100-n):264);return e?-o:o},f=(t,e,n="beforeend")=>t.insertAdjacentElement(n,e);return class{constructor(t,e={}){this.t=t,this.o=e;const n=document.querySelectorAll("."+t),o=[].slice.call(n);o.map(((t,n)=>{const o=JSON.parse(t.getAttribute("data-pie"));t.setAttribute("data-pie-index",o.index||e.index||n+1)})),this.i=o}initial(t){const e=t||this.i;Array.isArray(e)?e.map((t=>this.l(t))):this.l(e)}h(t,d,h){const u=this.t;h.number&&f(t,((t,e)=>{const n=c("text");n.classList.add(`${e}-text-${t.index}`),f(n,l(`${e}-percent-${t.index}`)),f(n,l(`${e}-unit-${t.index}`,t.unit));const o={x:"50%",y:"50%",fill:t.fontColor,"text-anchor":"middle",dy:t.textPosition||"0.35em",...i(t)};return a(n,o),n})(h,u));const m=s(`.${u}-circle-${h.index}`),p={fill:"none","stroke-width":h.stroke,"stroke-dashoffset":"264",...n(),...o(h)};a(m,p),this.animationTo({...h,element:m},!0),m.setAttribute("style",e(h)),r(m,h),d.setAttribute("style",`width:${h.size}px;height:${h.size}px;`)}animationTo(e,n=!1){const o=this.t,c=JSON.parse(s(`[data-pie-index="${e.index}"]`).getAttribute("data-pie")),l=s(`.${o}-circle-${e.index}`);if(!l)return;const f=n?e:{...t,...c,...e,...this.o};if(n||r(l,f),!n&&f.number){const t={fill:f.fontColor,...i(f)},e=s(`.${o}-text-${f.index}`);a(e,t)}const h=s(`.${o}-percent-${e.index}`);if(f.animationOff)return f.number&&(h.textContent=""+f.percent),void l.setAttribute("stroke-dashoffset",d(f.percent,f.inverse));let u=JSON.parse(l.getAttribute("data-angel"));const m=Math.round(e.percent);if(0==m&&(f.number&&(h.textContent="0"),l.setAttribute("stroke-dashoffset","264")),m>100||m<=0||u===m)return;let p,$=n?0:u;const g=1e3/(f.speed||1e3);let x=performance.now();const k=t=>{p=requestAnimationFrame(k);const e=t-x;e>=g-.1&&(x=t-e%g,u>=f.percent?$--:$++),l.setAttribute("stroke-dashoffset",d($,f.inverse,f.cut)),h&&f.number&&(h.textContent=""+$),l.setAttribute("data-angel",$),l.parentNode.setAttribute("aria-valuenow",$),$===m&&cancelAnimationFrame(p)};requestAnimationFrame(k)}l(e){const n=e.getAttribute("data-pie-index"),o=JSON.parse(e.getAttribute("data-pie")),i={...t,...o,index:n,...this.o},s=c("svg"),r={role:"progressbar",width:i.size,height:i.size,viewBox:"0 0 100 100","aria-valuemin":"0","aria-valuemax":"100"};a(s,r),i.colorCircle&&s.appendChild(this.u(i)),i.lineargradient&&s.appendChild((({index:t,lineargradient:e})=>{const n=c("defs"),o=c("linearGradient");o.id="linear-"+t;const i=[].slice.call(e);n.appendChild(o);let s=0;return i.map((t=>{const e=c("stop");a(e,{offset:s+"%","stop-color":""+t}),o.appendChild(e),s+=100/(i.length-1)})),n})(i)),s.appendChild(this.u(i,"top")),e.appendChild(s),this.h(s,e,i)}u(t,i="bottom"){const s=c("circle");let r={};if(t.cut){const i=264-2.64*(100-t.cut);r={"stroke-dashoffset":t.inverse?-i:i,style:e(t),...n(),...o(t)}}const l={fill:t.fill,stroke:t.colorCircle,"stroke-width":t.strokeBottom||t.stroke,...r};t.strokeDasharray&&Object.assign(l,{...n(t.strokeDasharray)});const d={cx:"50%",cy:"50%",r:42,"shape-rendering":"geometricPrecision",..."top"===i?{class:`${this.t}-circle-${t.index}`}:l};return a(s,d),s}}}));
